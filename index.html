<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Train Scheduler!</title>

	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>
<body>

<div class="container">

	<br>

	<!-- Jumbotron -->
  
	<div class="jumbotron">
		<h1 class="text-center">Anytime is Train Time!</h1>
	</div>

	<div class="row">

		<!-- Train Times Display -->
	<div class = "col-lg-12">
			<div class="panel panel-info">
				<div class="panel-heading">
					<h3 class="panel-title">Current Train Schedule</h3>
				</div>
				<div class="panel-body">
					<div class="well"></div>
				</div>
			</div>
		</div>


		<!-- Sign-Up Panel-->
		<div class="col-lg-6">
			<div class="panel panel-info">
				<div class="panel-heading">
					<h3 class="panel-title">Add Train</h3>
				</div>
				<div class="panel-body">

					<!-- Sign-up Form (note the various input "types")-->
					<form role="form">
						<div class="form-group">
							<label for="text">Train Name:</label>
							<input type="text" class="form-control" id="nameinput">
						</div>
						<div class="form-group">
							<label for="text">Destination:</label>
							<input type="text" class="form-control" id="destinationinput">
						</div>
						<div class="form-group">
							<label for="text">First Train Time (HH:mm - military time):</label>
							<input type="number" class="form-control" id="timeinput">
						</div>
						<div class="form-group">
							<label for="text">frequency (min):</label>
							<input type="number" class="form-control" id="frequencyinput">
						</div>

						<button type="submit" class="btn btn-info" id="submit">Submit</button>
					</form>

				</div>
			</div>
		</div>


		<!-- Latest compiled and minified CSS & JS -->
<script src="https://code.jquery.com/jquery.js"></script>

<!-- LINK TO FIREBASE GOES HERE -->
<script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>

<script>

// ========================================== START CODING BELOW!!

// Initialize Firebase
  var config = {
    apiKey: "AIzaSyCU7VvoKzIQX1hZqVifEZpTGz-iuPVDnsY",
    authDomain: "train-scheduler-9285b.firebaseapp.com",
    databaseURL: "https://train-scheduler-9285b.firebaseio.com",
    storageBucket: "train-scheduler-9285b.appspot.com",
    messagingSenderId: "760836903965"
  };
  firebase.initializeApp(config);

// Create a variable to reference the database
var database = firebase.database();

// Initial Values
var name = "";
var destination = "";
var time = 0;
var frequency = "";


// Capture Button Click
$("#submit").on("click", function() {

	// Code in the logic for storing and retrieving the train schedule.
	// provide initial data to your Firebase database.

	name = $('#nameinput').val().trim();
	destination = $('#destinationinput').val().trim();
	time = $('#timeinput').val().trim();
	frequency = $('#frequencyinput').val().trim();

	database.ref().push({
		name: name,
		destination: destination,
		time: time,
		frequency: frequency
	});


	// Don't refresh the page!
	return false;
});

// listening to new children added to database
	firebase.database().ref().on("child_added", function(snapshot){
		$(".well").append("<p>"+snapshot.val().name+"</p>");
		$(".well").append("<p>"+snapshot.val().destination+"</p>");
		$(".well").append("<p>"+snapshot.val().time+"</p>");
		$(".well").append("<p>"+snapshot.val().frequency+"</p>");
		$(".well").append("<hr>");

	})

//Firebase watcher + initial loader HINT: .on("value")
database.ref().on("value", function(snapshot) {

	// Log everything that's coming out of snapshot
	console.log(snapshot.val());
	console.log(snapshot.val().name);
	console.log(snapshot.val().destination);
	console.log(snapshot.val().time);
	console.log(snapshot.val().frequency);

	



	// // Change the HTML to reflect
	// $("#nameinput").html(snapshot.val().name);
	// $("#destinationinput").html(snapshot.val().destination);
	// $("#timeinput").html(snapshot.val().time);
	// $("#frequency").html(snapshot.val().frequency);


// Handle the errors
}, function(errorObject) {

	console.log("Errors handled: " + errorObject.code);
});


var jumboHeight = $('.jumbotron').outerHeight();
function parallax(){
    var scrolled = $(window).scrollTop();
    $('.bg').css('height', (jumboHeight-scrolled) + 'px');
}

$(window).scroll(function(e){
    parallax();
});

</script>

</body>
</html>